<?php	if (!defined('_PS_VERSION_'))	exit;	class Showmailalert extends Module	{		public function __construct()		{						$this->name = 'showmailalert';				$this->tab = 'administration';			$this->version = '1.0.1';			$this->author = 'M.B / ZelTroN2k3';			$this->need_instance = 0;			$this->ps_versions_compliancy = array('min' => '1.6', 'max' => _PS_VERSION_);			$this->bootstrap = true;						parent::__construct();						$this->displayName = $this->l('See customer email notification requests');			$this->description = $this->l('Seeing customer email notification requests allows you to find out which items customers want');			$this->confirmUninstall = $this->l('Are you sure you want to uninstall?');		}				public function install()		{			if (!parent::install())				return false;			return true;		}			public function uninstall()		{			if (!parent::uninstall())				return false;			return true;		}				public function getContent()		{        $this->context->smarty->assign(			array(				'ps_version' => _PS_VERSION_,				'module_dir' => $this->_path,				'module_version' => $this->version			)		);					$notif = array();			$sql = Db::getInstance()->ExecuteS('			SELECT ppl.name, pm.customer_email, pi.id_image,pm.id_product,ppl.link_rewrite,ppi.id_image as imageatt, pm.id_product_attribute			FROM `'._DB_PREFIX_.'mailalert_customer_oos` pm			left join '._DB_PREFIX_.'product_lang ppl on (ppl.id_product=pm.id_product and ppl.id_lang = "'.$this->context->language->id.'")			left join '._DB_PREFIX_.'image pi on (pi.id_product=ppl.id_product and pi.cover = "1")			left join '._DB_PREFIX_.'product_attribute_image ppi on (ppi.id_product_attribute=pm.id_product_attribute and ppi.id_image = (select min(id_image) from '._DB_PREFIX_.'product_attribute_image where id_product_attribute = pm.id_product_attribute))'); 						if (Db::getInstance()->numRows())			{				foreach ($sql AS $row)				{					$notif[$row['customer_email'].$row['id_product']]['id_product'] = $row['id_product'];					$notif[$row['customer_email'].$row['id_product']]['id_product_attribute'] = ($row['id_product_attribute'] == 0 ? '':'-'.$row['id_product_attribute']);					$notif[$row['customer_email'].$row['id_product']]['customer_email'] = $row['customer_email'];					$notif[$row['customer_email'].$row['id_product']]['link_rewrite'] = $row['link_rewrite'];					$notif[$row['customer_email'].$row['id_product']]['titre'] = $row['name'];					$notif[$row['customer_email'].$row['id_product']]['image'] = ($row['imageatt'] == NULL ? $row['id_image']:$row['imageatt']);					}								$this->context->smarty->assign('array', $notif);				$this->context->smarty->assign('url', _PS_BASE_URL_SSL_);							}			return $this->display(__FILE__, 'views/templates/admin/configuration.tpl');					}			}							